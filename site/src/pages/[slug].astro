---
import Layout from '../layouts/Layout.astro';

export async function getStaticPaths() {
  const postModules = import.meta.glob('../posts/*.md', { eager: true });
  
  return Object.entries(postModules).map(([path, post]) => {
    const slug = path.split('/').pop()?.replace('.md', '') || '';
    return {
      params: { slug },
      props: {
        post: {
          ...post.frontmatter,
          content: post.default
        }
      }
    };
  });
}

const { slug } = Astro.params;
const { post } = Astro.props;
const Content = post.content;
---

<Layout title={post.title}>
  <article class="max-w-3xl mx-auto my-8">
    <header class="mb-8">
      <h1 class="text-4xl font-bold mb-2">{post.title}</h1>
      <p class="text-gray-600">
        {new Date(post.date).toLocaleDateString()}
      </p>
      {post.tags && (
        <div class="mt-4 flex flex-wrap gap-2">
          {post.tags.map((tag: string) => (
            <a 
              href={`/tags/${tag}`}
              class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm hover:bg-blue-200 transition"
            >
              #{tag}
            </a>
          ))}
        </div>
      )}
    </header>
    
    <div class="prose prose-lg max-w-none">
      <Content />
    </div>
    
    <div class="mt-10 pt-6 border-t border-gray-200">
      <a href="/" class="text-blue-600 hover:underline">‚Üê Back to Home</a>
    </div>
  </article>
</Layout>