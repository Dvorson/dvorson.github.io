---
import Layout from '../../layouts/Layout.astro';

const posts = Object.values(import.meta.glob('../../posts/*.md', { eager: true }));

// Collect unique tags
const tagSet = new Set<string>();
for (const post of posts) {
  if (Array.isArray(post.frontmatter?.tags)) {
    for (const t of post.frontmatter.tags) tagSet.add(t);
  }
}

const tags = Array.from(tagSet).sort();
---

<Layout>
  <section class="my-8">
    <h1 class="text-3xl font-bold mb-4">Tags</h1>
    {tags.length > 0 ? (
      <ul class="flex flex-wrap gap-2">
        {tags.map((tag) => (
          <li>
            <a href={`/tags/${tag}/`} class="bg-gray-200 px-3 py-1 rounded hover:bg-gray-300">
              {tag}
            </a>
          </li>
        ))}
      </ul>
    ) : (
      <p class="text-gray-600">No tags yet.</p>
    )}
  </section>
</Layout>
