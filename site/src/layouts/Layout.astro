---
import '../styles/global.css';

interface Props {
  title?: string;
  description?: string;
  ogImage?: string;
  url?: string;
  canonical?: string;
  additionalSchema?: object[];
}

const defaultTitle = 'Anton Dvorson — AI Solutions Architect';
const defaultDescription = 'I help businesses build AI agents, knowledge graphs, and intelligent platforms that ship to production. 12+ years of enterprise delivery across Fortune-500 retail, telecom, and media.';
const { title = defaultTitle, description = defaultDescription, ogImage = '/img/multipassport.jpg', url = 'https://dvorson.github.io', canonical, additionalSchema } = Astro.props;

const baseSchema = {
  '@context': 'https://schema.org',
  '@graph': [
    {
      '@type': 'Person',
      name: 'Anton Dvorson',
      jobTitle: 'AI Solutions Architect',
      url: 'https://dvorson.github.io',
      knowsAbout: ['AI Agents', 'GraphRAG', 'Knowledge Graphs', 'LLM Engineering', 'Software Architecture', 'E-commerce Architecture', 'Node.js', 'TypeScript', 'Neo4j'],
      sameAs: ['https://github.com/dvorson', 'https://linkedin.com/in/dvorson'],
      workLocation: { '@type': 'City', name: 'Amsterdam' }
    },
    {
      '@type': 'ProfessionalService',
      name: 'Anton Dvorson — AI Solutions Architect',
      url: 'https://dvorson.github.io',
      description: 'AI consulting: agents, knowledge graphs, LLM integration, e-commerce architecture',
      areaServed: ['Netherlands', 'Europe'],
      serviceType: ['AI Consulting', 'GraphRAG Implementation', 'AI Agent Development', 'E-commerce Architecture', 'LLM Integration']
    }
  ]
};
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content={description} />
  <title>{title}</title>

  <!-- Canonical URL -->
  <link rel="canonical" href={canonical || url} />

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content={url} />
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content={ogImage} />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content={ogImage} />

  <!-- Schema.org Person + Service -->
  <script type="application/ld+json" set:html={JSON.stringify(baseSchema)} />
  {additionalSchema && additionalSchema.map(schema => (
    <script type="application/ld+json" set:html={JSON.stringify(schema)} />
  ))}

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

  <!-- KaTeX for math formatting if needed -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css" integrity="sha384-GvrOXuhMATgEsSwCs4smul74iXGOixntILdUW9XmUC6+HX0sLNAK3q71HotJqlAn" crossorigin="anonymous" />

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
</head>
<body class="min-h-screen flex flex-col bg-gray-50">
  <!-- Navigation -->
  <nav class="bg-white/80 backdrop-blur py-4 border-b border-gray-100 sticky top-0 z-10">
    <div class="container mx-auto flex items-center justify-between">
      <a href="/" class="text-xl font-bold text-gradient">Anton Dvorson</a>

      <!-- Hamburger button (mobile only) -->
      <button id="mobile-menu-btn" class="md:hidden text-gray-600 hover:text-indigo-600 transition-colors" aria-label="Toggle menu">
        <i class="fas fa-bars text-xl"></i>
      </button>

      <!-- Desktop nav -->
      <div class="hidden md:flex items-center space-x-6">
        <a href="/" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">Home</a>
        <a href="/solutions" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">Solutions</a>
        <a href="/case-studies" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">Case Studies</a>
        <a href="/blog" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">Blog</a>
        <a href="/cv" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">CV</a>
        <a href="https://linkedin.com/in/dvorson" class="text-gray-600 hover:text-indigo-600 transition-colors" target="_blank" rel="noopener noreferrer">
          <i class="fab fa-linkedin text-lg"></i>
        </a>
        <a href="https://github.com/dvorson" class="text-gray-600 hover:text-indigo-600 transition-colors" target="_blank" rel="noopener noreferrer">
          <i class="fab fa-github text-lg"></i>
        </a>
      </div>
    </div>

    <!-- Mobile nav dropdown -->
    <div id="mobile-menu" class="hidden md:hidden border-t border-gray-100 mt-4 pt-4">
      <div class="container mx-auto flex flex-col space-y-3">
        <a href="/" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">Home</a>
        <a href="/solutions" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">Solutions</a>
        <a href="/case-studies" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">Case Studies</a>
        <a href="/blog" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">Blog</a>
        <a href="/cv" class="text-gray-600 hover:text-indigo-600 transition-colors font-medium">CV</a>
        <div class="flex space-x-4 pt-2">
          <a href="https://linkedin.com/in/dvorson" class="text-gray-600 hover:text-indigo-600 transition-colors" target="_blank" rel="noopener noreferrer">
            <i class="fab fa-linkedin text-lg"></i>
          </a>
          <a href="https://github.com/dvorson" class="text-gray-600 hover:text-indigo-600 transition-colors" target="_blank" rel="noopener noreferrer">
            <i class="fab fa-github text-lg"></i>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- Mobile menu toggle script -->
  <script is:inline>
    document.getElementById('mobile-menu-btn').addEventListener('click', function () {
      var menu = document.getElementById('mobile-menu');
      menu.classList.toggle('hidden');
    });
  </script>

  <!-- Main Content -->
  <main class="flex-grow container py-8">
    <slot />
  </main>

  <!-- Footer -->
  <footer class="bg-white border-t border-gray-100 py-8">
    <div class="container mx-auto text-center">
      <!-- Quick links -->
      <div class="mb-4 flex flex-wrap justify-center gap-x-4 gap-y-1 text-sm text-gray-400">
        <a href="/solutions" class="hover:text-gray-600 transition-colors">Solutions</a>
        <span class="text-gray-300">&middot;</span>
        <a href="/case-studies" class="hover:text-gray-600 transition-colors">Case Studies</a>
        <span class="text-gray-300">&middot;</span>
        <a href="/blog" class="hover:text-gray-600 transition-colors">Blog</a>
        <span class="text-gray-300">&middot;</span>
        <a href="/cv" class="hover:text-gray-600 transition-colors">CV</a>
        <span class="text-gray-300">&middot;</span>
        <a href="/pricing" class="hover:text-gray-600 transition-colors">Pricing</a>
      </div>
      <p class="text-gray-600 text-sm">
        &copy; {new Date().getFullYear()} Anton Dvorson. All rights reserved.
      </p>
      <div class="mt-4 flex justify-center space-x-4">
        <a href="https://linkedin.com/in/dvorson" class="text-gray-400 hover:text-gray-700 transition-colors" target="_blank" rel="noopener noreferrer">
          <i class="fab fa-linkedin text-lg"></i>
        </a>
        <a href="https://github.com/dvorson" class="text-gray-400 hover:text-gray-700 transition-colors" target="_blank" rel="noopener noreferrer">
          <i class="fab fa-github text-lg"></i>
        </a>
      </div>
    </div>
  </footer>
</body>
</html>